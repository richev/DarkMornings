@model Richev.DarkMornings.Web.Models.CommuteInfo

@Html.ValidationSummary()

@using (Html.BeginForm())
{
    <p class="question">Ever wondered how much longer you'll be commuting in the dark?</p>
    @Html.HiddenFor(model => model.Latitude)
    @Html.HiddenFor(model => model.Longitude)
    <h4>Timings</h4>
    <div class="with-icon">
        <i class="fa fa-clock-o"></i><span>I leave for work at</span>
        <span class="nowrap">
            @Html.DropDownListFor(model => model.MorningCommute.Hour, UIHelpers.GetHours(Model.MorningCommute.Hour))<span class="time-separator">:</span>@Html.DropDownListFor(model => model.MorningCommute.Minute, UIHelpers.GetMinutes(Model.MorningCommute.Minute))
        </span>
    </div>
    <div class="with-icon">
        <i class="fa fa-clock-o"></i><span>I get home from work at</span>
        <span class="nowrap">
            @Html.DropDownListFor(model => model.EveningCommute.Hour, UIHelpers.GetHours(Model.EveningCommute.Hour))<span class="time-separator">:</span>@Html.DropDownListFor(model => model.EveningCommute.Minute, UIHelpers.GetMinutes(Model.EveningCommute.Minute))
        </span>
    </div>
    <h4>Workdays</h4>
    <div class="working-days with-icon">
        <i class="fa fa-road"></i><span>I travel to work on</span>
        @Html.CheckBoxFor(model => model.WorkingDays.Monday)@Html.LabelFor(model => model.WorkingDays.Monday)
        @Html.CheckBoxFor(model => model.WorkingDays.Tuesday)@Html.LabelFor(model => model.WorkingDays.Tuesday)
        @Html.CheckBoxFor(model => model.WorkingDays.Wednesday)@Html.LabelFor(model => model.WorkingDays.Wednesday)
        @Html.CheckBoxFor(model => model.WorkingDays.Thursday)@Html.LabelFor(model => model.WorkingDays.Thursday)
        @Html.CheckBoxFor(model => model.WorkingDays.Friday)@Html.LabelFor(model => model.WorkingDays.Friday)
        @Html.CheckBoxFor(model => model.WorkingDays.Saturday)@Html.LabelFor(model => model.WorkingDays.Saturday)
        @Html.CheckBoxFor(model => model.WorkingDays.Sunday)@Html.LabelFor(model => model.WorkingDays.Sunday)
    </div>
    <div>
        <hr />
        <button type="submit">Calculate your commute &raquo;</button>
    </div>
}

@if (Model.MorningCommute.Daylights != null && Model.EveningCommute.Daylights != null)
{
    <hr />
    <h3>You have...</h3>
    <div class="results journey with-icon">
        @UIHelpers.GetJourneyText(Model.MorningCommute.Daylights)
    </div>
    <hr class="and" />
    <div class="results journey with-icon">
        @UIHelpers.GetJourneyText(Model.EveningCommute.Daylights)
    </div>
    <p class="ignoring">(excluding Bank and national holidays...)</p>
    <div class="share">
        <a href="http://twitter.com"><i class="fa fa-twitter"></i>Tweet this on Twitter</a>
        <a href="http://facebook.com"><i class="fa fa-facebook-square"></i>Share this on Facebook</a>
    </div>
}
<script type="text/javascript">
    function storePosition(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;

        $("#Latitude").val(latitude);
        $("#Longitude").val(longitude);
    }

    document.ready = function() {
        if (Modernizr.geolocation) {
            navigator.geolocation.getCurrentPosition(storePosition);
        }
    };
</script>